<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">What is ValLang? | The Rascal Meta Programming Language</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rascal-mpl.org/blog/2017/03/01/what-is-vallang"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="What is ValLang? | The Rascal Meta Programming Language"><meta data-rh="true" name="description" content="Vallang () is a highly integrated and mostly-closed collection of mutually recursive fundamental data-types on the Java Virtual Machine:"><meta data-rh="true" property="og:description" content="Vallang () is a highly integrated and mostly-closed collection of mutually recursive fundamental data-types on the Java Virtual Machine:"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2017-03-01T00:00:00.000Z"><meta data-rh="true" property="article:author" content="http://homepages.cwi.nl/~jurgenv"><link data-rh="true" rel="icon" href="/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://rascal-mpl.org/blog/2017/03/01/what-is-vallang"><link data-rh="true" rel="alternate" href="https://rascal-mpl.org/blog/2017/03/01/what-is-vallang" hreflang="en"><link data-rh="true" rel="alternate" href="https://rascal-mpl.org/blog/2017/03/01/what-is-vallang" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://FKSZQR9CR0-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="The Rascal Meta Programming Language RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="The Rascal Meta Programming Language Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="The Rascal Meta Programming Language" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/release-notes/rss.xml" title="The Rascal Meta Programming Language RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/release-notes/atom.xml" title="The Rascal Meta Programming Language Atom Feed"><link rel="stylesheet" href="/assets/css/styles.e3026242.css">
<link rel="preload" href="/assets/js/runtime~main.931a9eb1.js" as="script">
<link rel="preload" href="/assets/js/main.52414d04.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/rascal_large_no_text.png" alt="Rascal logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/rascal_large_no_text.png" alt="Rascal logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">The Rascal Meta Programming Language</b></a><a class="navbar__item navbar__link" href="/docs/WhyRascal/">Docs</a><a class="navbar__item navbar__link" href="/stories">Stories</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/release-notes">Release notes</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/projects">Projects</a><a class="navbar__item navbar__link" href="/team">Team</a><a href="https://github.com/usethesource" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/2017/03/01/what-is-vallang">What is ValLang?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/16/navigating-the-wordpress-plugin-landscape">Navigating the WordPress Plugin Landscape</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/12/performance-modeling-of-maximal-sharing">Performance Modeling of Maximal Sharing - Experience Report</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/01/01/empirical-analysis-of-the-relationship-between-CC-and-SLOC">Empirical analysis of the relationship between CC and SLOC</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/10/30/optimizing-hash-tries">Optimizing Hash Tries</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/03/02/from-imperative-to-functional">From imperative programming to functional programming</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2013/08/02/the-language-interaction-design-of-concrete-syntax">The Language Interaction Design of Concrete Syntax</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2013/07/29/dsl-in-36-lines-of-code">A DSL in 36 lines of code</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2013/05/15/from-functions-to-term-rewriting-and-back">From functions to term rewriting and back in Rascal</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">What is ValLang?</h1><div class="container_mt6G margin-vert--md"><time datetime="2017-03-01T00:00:00.000Z" itemprop="datePublished">March 1, 2017</time> Â· <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="http://homepages.cwi.nl/~jurgenv" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://www.cwi.nl/news/2014/jurgen-vinju-appointed-professor/@@images/5e1fe43d-a00b-4989-a5b9-eb526725c6ee.jpeg" alt="Jurgen Vinju"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="http://homepages.cwi.nl/~jurgenv" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jurgen Vinju</span></a></div><small class="avatar__subtitle" itemprop="description">Groupleader @ CWI-SWAT, professor @ TU/E, Rascal Core Team</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p><strong>Vallang</strong> (<a href="https://github.com/usethesource/vallang" target="_blank" rel="noopener noreferrer">https://github.com/usethesource/vallang</a>) is a highly integrated and mostly-closed collection of mutually recursive fundamental data-types on the Java Virtual Machine:</p><ul><li>locations represented by URIs: <code>|java+class://java/lang/String|</code> and <code>|file:///tmp/HelloWorld.java|</code></li><li>integers of arbitrary size: <code>1,2,3, 134812345123841234</code></li><li>reals of arbitrary size, precision and scale: <code>1., 1.0, 1e10</code></li><li>rational numbers: <code>1r1, 1r7</code></li><li>unicode strings: <code>&quot;hello ð&quot;</code></li><li>lists: <code>[1,2, 1.0, &quot;hello ð&quot;]</code>, <code>[]</code></li><li>sets: <code>{1,2, 1.0, &quot;hello ð&quot;}</code>, <code>{}</code></li><li>maps: <code>(1:0, &quot;a&quot;:&quot;b&quot;)</code>, <code>()</code></li><li>n-ary tuples with named fields: <code>&lt;1,2,&quot;a&quot;,1.0&gt;</code>, <code>&lt;&gt;</code></li><li>n-ary relations (represented as sets of n-ary tuples): <code>{&lt;1,2,&quot;a&quot;,1.0&gt;, &lt;&gt;}</code></li><li>tree nodes: <code>&quot;myNode&quot;(1,2,3)</code></li><li>many-sorted algebraic terms, acting as typed tree nodes: <code>myNode(1,2,3)</code>.</li><li>keyword fields or properties to tree nodes and algebraic data-types: <code>&quot;myNode&quot;(name=&quot;Winston&quot;)</code>, <code>myNode(age=12)</code></li></ul><p>Operations on these data-types are too many to list here. A selection is listed below, but you should expect the features to be pretty low level; i.e. directly accessing and manipulating the data rather than providing analysis algorithms. Algorithms in the library are added only if programming them below the abstraction layer of <strong>vallang</strong> provides a major efficiency benefit or it can factors out highly common client code into a reusable feature. More on this design decision later. </p><ul><li>relational calculus operators such as transitive (reflexive) closure, query and projections, compositions and joins</li><li>generic tree traversal and primitives for implementing pattern matching</li></ul><p><strong>Vallang</strong> has a type system based on type systems in functional programming, but note that each value has a most specific dynamic type associated always at run-time. More on the design of the type system below, but here is a list of <strong>vallang</strong> types:</p><ul><li><code>void</code> - the bottom type with no values</li><li><code>value</code> - the top type for all values</li><li><code>loc</code> - the type for URI locations</li><li><code>int</code>, <code>real</code>, <code>rat</code> are all sub-types of the aggregate type <code>num</code></li><li><code>tuple[t1,...,tn]</code> and <code>tuple[t1 l1, ..., tn ln]</code> to represent tuples of fixed but arbitrary arity</li><li><code>list[t]</code>, <code>set[t]</code>, <code>map[t1,t2]</code> as incomparable alternative collection types.</li><li><code>node</code> for trees</li><li>user-defined many-sorted mutually recursive algebraic data-types, acting as grammars for instances of tree nodes: <code>data MyADT = myNode(int a, int b, int c, int age=...)</code></li><li>alias types for short-handed type equivalences</li><li><code>rel[t1, ..., tn]</code> is an alias for <code>set[tuple[t1,...tn]]</code></li><li>open type parameters with upper bounds, <code>&amp;T &lt;: node</code>, can be used to type parameterize composite types (used in type aliases) and to construct higher-order abstract algebraic datatypes.</li></ul><p>Sub-typing is <em>co-variant</em> for the container types <code>list</code>, <code>map</code>, <code>set</code> and <code>tuple</code>. Otherwise these rules define the entire type system:</p><ul><li><code>value</code> is a strict supertype of all other types other than itself</li><li><code>node</code> is the common supertype of all algebraic data-types</li><li>each algebraic constructor is a strict sub-type of its abstract sort</li><li><code>void</code> is the sub-type of all types</li><li><code>num</code> is the supertype of <code>rat</code>, <code>int</code> and <code>real</code></li><li>an alias <code>alias X = Y</code> is a type equivalence</li><li>constructor types are sub-types if they have the same name and arity, and they are comparable in their argument types. <ul><li>Within a single abstract sort no two alternative constructors may be sub-types of each other. </li></ul></li></ul><p>There exists an extension mechanism for adding type kinds and their associated value kinds to the <strong>vallang</strong> system. Rascal, for example, uses this to represent functions and co-routines at run-time. The extension mechanism works by declaring a bi-directional transformation between the extensions and a symbolic representation of choice (chosen freely from the core representation mechanisms of <strong>vallang</strong>). This bidirectional mapping is mostly used when serializing and deserializing values (see below).</p><p>The types of <strong>vallang</strong> in Java are represented by a Composite design pattern with maximally shared instances of (the otherwise opaque) abstract class <code>Type</code>. These types expose fast implementations of sub-type and type equivalence for implementing fast pattern matching. </p><p>The values of <strong>vallang</strong> are all instances of <code>IValue</code> and sub-interfaces thereof. For every kind of value there is an interface, e.g. <code>ISet</code>, <code>IList</code>, <code>ITuple</code> and <code>IConstructor</code> but they are not type-parametrized because Java&#x27;s type system can not represent the aforementioned co-variant sub-typing rules we require. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-does-vallang-exist">Why does Vallang exist?<a class="hash-link" href="#why-does-vallang-exist" title="Direct link to heading">â</a></h2><p><strong>vallang</strong> is a <a href="http://www.usethesource.io" target="_blank" rel="noopener noreferrer">UseTheSource</a> project recently renamed from <strong>rascal-values</strong>, which was known earlier as <strong>pdb.values</strong>. </p><p>The project started as a part of the <a href="http://homepages.cwi.nl/~jurgenv/papers/OOPSLA-2009.pdf" target="_blank" rel="noopener noreferrer">IDE metatooling platform</a> in 2007 as a <em>generic library for representing symbolic facts about source code</em>, for use in the construction of IDE services in Eclipse, then it continued to form the basis of the run-time system for <a href="http://www.rascal-mpl.org" target="_blank" rel="noopener noreferrer">Rascal</a> starting 2009, and finally was renamed to <strong>vallang</strong> to serve a wider scope.</p><p>We designed of <strong>vallang</strong> based on experience with and studying the <a href="http://www.meta-environment.org/Meta-Environment/ATerms.html" target="_blank" rel="noopener noreferrer">ATerm library</a> and <a href="http://www.meta-environment.org/Meta-Environment/WebHome.html" target="_blank" rel="noopener noreferrer">ASF+SDF</a>, but also by learning from RSF (Rigi Standard Format), Rscript and GXL and S-expressions. Perhaps JSON and YAML have also had a minor influence.</p><blockquote><p>The main purpose of <strong>vallang</strong> is to provide a flexible and fully typed collection of <em>symbolic</em> representations of data, specifically &quot;ready&quot; to represent facts about software systems but amenable to basically any form of symbolic data analysis purposes.</p></blockquote><p>This purpose aligns with the mission of the <a href="http://www.rascalmpl.org" target="_blank" rel="noopener noreferrer">Rascal metaprogramming language</a> which is made to <em>analyze</em> and <em>manipulate</em> exactly such symbolic representations. Therefore <strong>vallang</strong> is the run-time environment for both interpreted and compiled Rascal programs. </p><p>Note that while <strong>vallang</strong> is a great fit for symbolic data analysis, it is currently not the best fit for numerical data analysis as it features only a uniform symbolic represetation of numbers of arbitrary precision and size (ints, reals, rationals). In other words, the numbers and collections of numbers in <strong>vallang</strong> are optimized for storage size, clarity and equational reasoning rather than optimal computational efficiency. This also means that indirect numerical encodings of data (i.e. using numerical vectors and matrices), which are often used in symbolic analyses to optimize computational efficiency are not the right strategy when using <strong>vallang</strong>: it&#x27;s better to stick with a more direct symbolic representation and let <strong>vallang</strong> maintainers optimize them. </p><p>Next to the maintainers of Rascal, the main users of <strong>vallang</strong> are currently programmers who write data acquisition and (de)serialisation adapters for the Rascal ecosystem:</p><ul><li>connecting open-compiler front-ends to Rascal</li><li>providing external data-sources such as SQL and MongoDB databases</li><li>connecting reusable interaction and visualization front-ends to Rascal</li></ul><blockquote><p>Nevertheless <strong>vallang</strong> is a generic and Rascal-independent library which may serve as the run-time system for other programming languages or analysis systems, such as term rewriting systems, relational calculus systems, constraint solvers, model checkers, model transformations, etc.</p></blockquote><p>The latter perspective is the reason for the re-branding of <strong>rascal-values</strong> to <strong>vallang</strong>. You might consider <strong>vallang</strong> as a functional replacement for ECore, an alternative to the ATerm library on the JVM, or an alternative to JSON-based noSQL in-memory database systems, or a way of implementing graph databases. </p><p>Finally, <strong>vallang</strong> is a JVM library because that is where we needed it for Rascal and the Eclipse IDE Metatooling Platform. We hope other JVM programmers will also benefit from it and we have no plans of porting it at the moment to any other technological space. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-main-design-considerations-of-vallang">What are the main design considerations of Vallang?<a class="hash-link" href="#what-are-the-main-design-considerations-of-vallang" title="Direct link to heading">â</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="vallang-values-are-symbolic-and-immutable">Vallang values are symbolic and immutable.<a class="hash-link" href="#vallang-values-are-symbolic-and-immutable" title="Direct link to heading">â</a></h4><p>We think software analysis is complex enough to be confusing to even the most experienced programmers. Manipulating huge stores of hierarchical and relational data about softwar easily goes wrong; trivial bugs due to aliasing and sharing data between different stages of an analysis or transformation can take weeks to resolve, or worse: will never even be diagnosed. </p><p>Since our goal is to provide many more variants of all kind of software analyses, we wish to focus on the interesting algorithmic details rather than the trivial mistakes we make. Therefore, <strong>vallang</strong> values are <em>immutable</em>. Sharing of values or parts of values is allowed under-the-hood but is not observable. The library is implemented using persistent and/or maximally shared data structures for reasons of efficiency. </p><p>Users of <strong>vallang</strong> freely share references to their data to other parts of an analysis because they know the data can not change due to an unforeseen interaction. We also believe that the immutable values can be shared freely between threads on the JVM, but there are not enough tests yet to make such a bold claim with full confidence. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="vallang-values-are-generated-via-the-abstractfactory-design-pattern-and-do-not-leak-implementation-representations">Vallang values are generated via the AbstractFactory design pattern and do not leak implementation representations<a class="hash-link" href="#vallang-values-are-generated-via-the-abstractfactory-design-pattern-and-do-not-leak-implementation-representations" title="Direct link to heading">â</a></h4><p>The reason is that client code <em>must</em> abstract from the implementation details to arrive at the mathematical precision of symbolic reasoning which <strong>vallang</strong> should provide.</p><p>This also serves a maintenance and evolution purpose for implementations of the library. We can plug in a new implementation of the library without affecting client code.</p><p>Note that for efficiency reasons values produced from different implementations of an abstract value factory (different implementations of <code>IValueFactory</code>) are not required to interact correctly.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="vallang-values-uniquely-deserializeserialize-fromto-a-standard-and-simple-expression-language">Vallang values uniquely deserialize/serialize from/to a standard and simple expression language<a class="hash-link" href="#vallang-values-uniquely-deserializeserialize-fromto-a-standard-and-simple-expression-language" title="Direct link to heading">â</a></h4><p>The general rule is that for any two JVM object reference <code>o</code> and <code>p</code> to any <strong>vallang</strong> object the following rule holds: <code>o.toString().equals(p.toString) &lt;==&gt; o.equals(p)</code></p><p>We currently random test this rule and it sometimes fails due to a deprecated feature called &quot;annotations&quot; which we are removing to make the above contract true.</p><p>The intended effects of the toString/equals contract of <strong>vallang</strong> are the following:</p><ul><li>What-you-see-is-what-you-get: debugging values by printing them means that you get as a programmer full disclosure about the meaning of the object</li><li>Structural equality and equational reasoning: the context in which values are created can not have any influence on their identity</li><li>Sharing is safe</li><li>Serialisation and deserialisation is never lossy</li><li>The sub-type relation for types of values coincides exactly with sublanguage concept of the set of sentences for all values of the given types. </li></ul><p>The latter point is one of the main reasons why <strong>vallang</strong> is called a <strong>lang</strong>uage. The result of <code>anyValue.toString()</code> is a members of a precisely defined textual languages. The full textual language is generated from the <code>value</code> type, and sub-languages are generated from the respective sub-types. <code>void</code> is the empty language. In this manner the types of <strong>vallang</strong> act like non-terminals of a precise context-free grammar. The <strong>vallang</strong> language as defined above is a strict sub-language of the <code>Expression</code> sub-language of Rascal.</p><p>The other reason why <strong>vallang</strong> is names as a language is because the implementations of the <code>IValue</code> interface and its sub-interfaces are seen as a closed combinator language for computations on the values, and their implementations are interpreters for this language. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="vallang-values-always-know-their-most-precise-concrete-ad-hoc-run-time-type">Vallang values always know their most-precise concrete ad-hoc run-time type<a class="hash-link" href="#vallang-values-always-know-their-most-precise-concrete-ad-hoc-run-time-type" title="Direct link to heading">â</a></h4><ul><li>This is nice for debugging purposes, the types are descriptions of values and if matching or equality checking fails then the type abstraction usually explains why without having to go into reading the entire value.</li><li>Types may be computed lazily or eagerly, cashed or not. This is not functionally observable but it may affect run-time efficiency</li><li>Having precise run-time types for every (nested) value, and having efficient access to this, is a prerequisite for building fast and type-safe rank-2 polymorphic higher order functional computations. Or in functional terms: you need this to make folds and maps work on heterogenous recursive and open data-types. Or in simpler terms: using this we can build statically type-safe data traversal and daya transformation features into Rascal. </li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="vallang-values-include-both-trees-and-relations">Vallang values include both trees and relations<a class="hash-link" href="#vallang-values-include-both-trees-and-relations" title="Direct link to heading">â</a></h4><p>Even though both trees and relations are generic enought to represent any data, sometimes a graph or table is more natural than a tree and sometimes the other way around. </p><ul><li>trees are nice for abstract and concrete syntax representations</li><li>trees are nice for abstract symbolic domains, such as terms for constraint variables and binary constraints</li><li>relations are nice for graph-like unstructred data, such as project dependencies, call graphs, etc.</li><li>relations are nice for access to external data stored in spreadsheets and databases</li><li>trees are nice for access to web data stored in HTML, XML, JSON formats etc.</li><li>trees are good for transformation purposes, where we parse something, rewrite it and unparse it again</li><li>relations are good for analysis purposes, where we extract facts, elaborate on them and finally report the result.</li></ul><p>Rascal is a language which can be used to easily switch between different representations of the same information, using pattern matching, querying, comprehensions, etc. From <strong>vallang</strong> you should not expect any help in this regard: the choice of representation for any information is a key design decision for the user of <strong>vallang</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="who-contributed-to-vallang">Who contributed to Vallang?<a class="hash-link" href="#who-contributed-to-vallang" title="Direct link to heading">â</a></h2><ul><li>Robert M. Fuhrer (IBM TJ Watson)</li><li>Jurgen J. Vinju (IBM TJ Watson and Centrum Wiskunde &amp; Informatica)</li><li>Arnold Lankamp (Centrum Wiskunde &amp; Informatica)</li><li>Michael Steindorfer (Centrum Wiskunde &amp; Informatica and TU Delft)</li><li>Davy Landman (Centrum Wiskunde &amp; Informatica and SWAT.engineering)</li><li>Paul Klint (Centrum Wiskunde &amp; Informatica)</li></ul><p>and occasional contributions from others please see <a href="https://github.com/usethesource/rascal-value/graphs/contributors" target="_blank" rel="noopener noreferrer">github&#x27;s factual overview</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-in-the-near-future-for-vallang">What is in the near future for Vallang?<a class="hash-link" href="#what-is-in-the-near-future-for-vallang" title="Direct link to heading">â</a></h2><ol><li>Removal of the &quot;annotations&quot; feature, which is completely replaces by the &quot;keyword fields&quot; feature. The main differences between these features are:<ul><li>While they both offer extensibility to the set of names and typed fields of nodes and constructors, annotations can never influence <code>equals()</code> while keyword fields always do. </li><li>Syntactically the notation for keyword fields is more compact: <code>f()[@myAnno=1]</code> versus <code>f(myField=1)</code></li></ul></li><li>Further integration of the capabilities of <a href="http://www.usethesource.io/projects/capsule" target="_blank" rel="noopener noreferrer">Capsule</a> for persistent and optimized immutable collections under the hood of <code>IMap</code>, <code>ISet</code>, <code>IRelationAlgebra</code>:<ul><li>Reflexive relations with two indices (for both columns)</li><li>Heterogeneous collections of numbers (unboxing down to primitive types to safe space)</li><li>Smooth and incremental transitions from map to multimap representations</li></ul></li><li><code>IBag</code>, the <code>bag[&amp;T]</code> type</li></ol></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col margin-top--sm"><a href="https://github.com/usethesource/rascal-website/tree/website-v2/blog/blog/2017-03-01-what-is-vallang.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2016/05/16/navigating-the-wordpress-plugin-landscape"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Navigating the WordPress Plugin Landscape</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-does-vallang-exist" class="table-of-contents__link toc-highlight">Why does Vallang exist?</a></li><li><a href="#what-are-the-main-design-considerations-of-vallang" class="table-of-contents__link toc-highlight">What are the main design considerations of Vallang?</a></li><li><a href="#who-contributed-to-vallang" class="table-of-contents__link toc-highlight">Who contributed to Vallang?</a></li><li><a href="#what-is-in-the-near-future-for-vallang" class="table-of-contents__link toc-highlight">What is in the near future for Vallang?</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/GettingStarted">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/rascal" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/usethesource" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 UseTheSource. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.931a9eb1.js"></script>
<script src="/assets/js/main.52414d04.js"></script>
</body>
</html>