<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-RascalConcepts">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="The Rascal Meta Programming Language RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="The Rascal Meta Programming Language Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="The Rascal Meta Programming Language" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/release-notes/rss.xml" title="The Rascal Meta Programming Language RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/release-notes/atom.xml" title="The Rascal Meta Programming Language Atom Feed"><title data-rh="true">Concepts | The Rascal Meta Programming Language</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rascal-mpl.org/docs/RascalConcepts"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Concepts | The Rascal Meta Programming Language"><meta data-rh="true" name="description" content="Synopsis."><meta data-rh="true" property="og:description" content="Synopsis."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://rascal-mpl.org/docs/RascalConcepts"><link data-rh="true" rel="alternate" href="https://rascal-mpl.org/docs/RascalConcepts" hreflang="en"><link data-rh="true" rel="alternate" href="https://rascal-mpl.org/docs/RascalConcepts" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://FKSZQR9CR0-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.394b0ecf.css">
<link rel="preload" href="/assets/js/runtime~main.3f32e7f3.js" as="script">
<link rel="preload" href="/assets/js/main.ea59d2f2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/rascal_large_no_text.png" alt="Rascal logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/rascal_large_no_text.png" alt="Rascal logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">The Rascal Meta Programming Language</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/WhyRascal">Docs</a><a class="navbar__item navbar__link" href="/stories">Stories</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/release-notes">Release notes</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/projects">Projects</a><a class="navbar__item navbar__link" href="/team">Team</a><a href="https://github.com/usethesource" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/WhyRascal">Why Rascal?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/GettingStarted">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/GettingHelp">Getting Help</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/RascalConcepts">Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Rascal">Language Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Libraries">Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/RascalShell">Rascal Shell</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/TypePal">TypePal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/RunTimeErrors">Runtime Errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/CompileTimeErrors">Compile Time Errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Rascalopedia">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Recipes">Recipes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Troubleshooting">Troubleshooting Installation Problems</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/EditIni">Configure Eclipse for rascal</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Concepts</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Concepts</h1></header><p><strong>Synopsis.</strong></p><p>Gentle introduction to the main concepts of the Rascal language.</p><p><strong>Description.</strong></p><p>Rascal is based on a dozen concepts and having a global understanding of them will help to grasp the language more
quickly. Here we will informally explain and illustrate these concepts and often we will refer to the <a href="/docs/Rascal">Rascal Language
Reference</a> for further details. In other words, we are providing here a friendly front-end for the actual
language description.</p><p>Most language concepts are described separately but some features we just mention here:</p><ul><li><p>Rascal programs consist of modules that are organized in packages.</p></li><li><p>Modules can import other modules.</p></li><li><p>The visibility of entities declared in modules can be controlled using public/private modifiers.</p></li><li><p>Data structures may have annotations that can be explicitly used and modified.</p></li><li><p>There is an extensive library for built-in datatypes, input/output, fact extraction from Java source code,
visualization, and more.</p></li></ul><p>Here are the concepts to be discussed:</p><ul><li><p><a href="#static-typing">Static Typing</a>: Static type checking.</p></li><li><p><a href="#datatypes">Datatypes</a>: Built-in and user-defined datatypes.</p></li><li><p><a href="#immutable-values">Immutable Values</a>: Immutable values.</p></li><li><p><a href="#comprehensions">Comprehensions</a>: Comprehensions for generating values.</p></li><li><p><a href="#pattern-matching">Pattern Matching</a>: Pattern matching.</p></li><li><p><a href="#control-structures">Control Structures</a>: Success-directed control structures.</p></li><li><p><a href="#case-distinction">Case Distinction</a>: Case distinction via pattern matching.</p></li><li><p><a href="#visiting">Visiting</a>: Visiting tree structures and arbitrary values.</p></li><li><p><a href="#functions">Functions</a>: Functions and pattern-directed invocation.</p></li><li><p><a href="#syntax-definition-and-parsing">Syntax Definition and Parsing</a>: Syntax definition and parser generation
for new languages.</p></li><li><p><a href="#ide-construction">IDE Construction</a>: Extend an IDE with interactive, language-specific, features
(Eclipse only).</p></li><li><p><a href="#code-models">Code Models</a>: Code models are abstract representations of source code.</p></li><li><p><a href="#enumerating">Enumerating</a>: Enumerating values.</p></li><li><p><a href="#equation-solving">Equation Solving</a>: Solving equations by fixed-point iteration.</p></li><li><p><a href="#rewriting">Rewriting</a>: Rewriting using pattern-directed invocation.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="static-typing">Static Typing<a class="hash-link" href="#static-typing" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Static type checking.</p><p><img loading="lazy" alt="Type Lattice" src="/assets/images/type-lattice-9a476acc338596237526acde1ad0c66b.png" width="847" height="951" class="img_ev3q"></p><p><strong>Description.</strong></p><p>Rascal has a static and a dynamic type system, which interact with eachother. The static type system is used by a type
checker (not yet released) to predict errors and give warnings where possibly slipups have been made. The dynamic type
system ensures well-formedness of data structures and plays an important role while pattern matching, since many
algorithms dispatch on the types of values.</p><p>Rascal’s static type system does not ensure that all functions will go right:</p><ul><li>functions may throw exceptions.</li><li>functions may not be defined for the specific pattern which occur on the call site.</li></ul><p>However, the static type system will produce an error when a function will certainly throw an exception, or when it is
certainly not defined for a certain case. Also it catches some logical tautologies and contradictions which would lead
to dead code.</p><p>The Rascal types are ordered in a so-called <em>type lattice</em> shown in the figure above.</p><p>The arrows describe a <em>subtype-of</em> relation between types. The type <code>void</code> is the <em>smallest</em> type and is included in all
other types and the type <code>value</code> is the <em>largest</em> type that includes all other types. We also see that <code>rel</code> is a
subtype of <code>set</code> and that each ADT is a subtype of <code>node</code>. A special role is played by the datatype <code>Tree</code> that is the
generic type of syntax trees. Syntax trees for specific languages are all subtypes of <code>Tree</code>. As a result, syntax trees
can be addressed at two levels:</p><ul><li><p>in a generic fashion as <code>Tree</code> and,</p></li><li><p>in a specific fashion as a more precisely typed syntax tree. Finally, each <code>alias</code> is structurally equivalent to one
or more specific other types.</p></li></ul><p>Rascal does not provide an explicit casting mechanism (as in Java), but pattern matching can play that role.</p><p>The language provides higher-order, parametric polymorphism. A type aliasing mechanism allows documenting specific uses
of a type. Built-in operators are heavily overloaded. For instance, the operator <code>+</code> is used for addition on integers
and reals but also for list concatenation, set union and the like.</p><p><strong>Examples.</strong></p><p>Some example can illustrate the above.</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int I = 3;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Since I is declared as type <code>int</code>, we cannot assign a <code>real</code> value to it:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">I = 3.5;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">num N = 3;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Since N is declared as type <code>num</code>, we can assign both <code>int</code> and <code>real</code> values to it:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">N = 3.5;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Since all types are a subtype of type <code>value</code>, one can assign values of any type to a variable declared as <code>value</code>:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">value V = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">V = &quot;abc&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">V = false;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can use pattern matching to classify the actual type of a value:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">str classify(value V){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  switch(V){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case str S: return &quot;A string&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case bool B: return &quot;A Boolean&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default: return &quot;Another type&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">classify(V);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">V = 3.5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">classify(V);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In addition to these standard examples, it is interesting that all <a href="/docs/Rascal#ADT">Algebraic Data
Types</a> are subtypes of type <code>node</code>. Let’s introduce a simple <code>Color</code> data type:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data Color = red(int level) | blue(int level);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Unsurprisingly, we have:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Color C = red(3);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Due to subtyping, we can also have:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">node ND = red(3);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>One example of the actual application of subtypes can be found in <a href="/docs/Recipes#countconstructors">Count
Constructors</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="datatypes">Datatypes<a class="hash-link" href="#datatypes" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Built-in and user-defined datatypes.</p><p><strong>Description.</strong></p><p>Rascal provides a rich set of datatypes:</p><ul><li><p><a href="/docs/Rascal#boolean">Boolean</a> (<code>bool</code>).</p></li><li><p>Infinite precision <a href="/docs/Rascal#integer">Integer</a> (<code>int</code>), <a href="/docs/Rascal#real">Real</a> (<code>real</code>), and
<a href="/docs/Rascal#number">Number</a> (<code>num</code>).</p></li><li><p><a href="/docs/Rascal#string">String</a>s (<code>str</code>) that can act as templates with embedded expressions and statements.</p></li><li><p>Source code <a href="/docs/Rascal#location">Location</a>s (<code>loc</code>) based on an extension of Universal Resource Identifiers
(URI) that allow precise description of text areas in local and remote files.</p></li><li><p>Date and time values (<a href="/docs/Rascal#datetime">DateTime</a>, <code>datetime</code>).</p></li><li><p><a href="/docs/Rascal#list">List</a> (<code>list</code>).</p></li><li><p><a href="/docs/Rascal#tuple">Tuple</a> (<code>tuple</code>).</p></li><li><p><a href="/docs/Rascal#set">Set</a> (<code>set</code>).</p></li><li><p><a href="/docs/Rascal#map">Map</a> (<code>map</code>)</p></li><li><p><a href="/docs/Rascal#relation">Relation</a> (<code>rel</code>).</p></li><li><p>Untyped tree structures (<a href="/docs/Rascal#node">Node</a>, <code>node</code>).</p></li><li><p>User-defined algebraic datatypes (<a href="/docs/Rascal#ADT">Algebraic Data Type</a>, <code>data</code>) allow the
introduction of problem-specific types and are a subtype of node. This makes it possible to have typed and untyped
views on the same data. A special case are syntax trees that are the result of parsing source files are represented
as datatypes (<code>Tree</code>).</p></li></ul><p>There is a wealth of built-in operators and library functions available on the standard datatypes.</p><p>These built-in datatypes are closely related to each other:</p><ul><li><p>In a list all elements have the same static type and the order of elements matters. A list may contain the same
value more than once.</p></li><li><p>In a set all elements have the same static type and the order of elements does not matter. A set contains an element
only once. In other words, duplicate elements are eliminated and no matter how many times an element is added to a
set, it will occur in it only once.</p></li><li><p>In a tuple all elements (may) have a different static type. Each element of a tuple may have a label that can be
used to select that element of the tuple.</p></li><li><p>A relation is a set of tuples which all have the same static tuple type.</p></li><li><p>A map is an associative table of (key, value) pairs. Key and value (may) have different static type and a key can
only be associated with a value once.</p></li></ul><p><strong>Examples.</strong></p><p>Here are some examples of the built-in data types:</p><table><thead><tr><th><em>Type</em></th><th><em>Examples</em></th></tr></thead><tbody><tr><td><code>bool</code></td><td><code>true</code>, <code>false</code></td></tr><tr><td><code>int</code></td><td><code>11, 101, 1-11, 1123456789</code></td></tr><tr><td><code>real</code></td><td><code>1.01, 11.0232e201, 1-25.5</code></td></tr><tr><td><code>str</code></td><td><code>&quot;abc&quot;</code>, <code>&quot;first\nnext&quot;</code>, <code>&quot;result: &lt;X&gt;&quot;</code></td></tr><tr><td><code>loc</code></td><td><code>\|file:///etc/passwd\|</code></td></tr><tr><td><code>dateTime</code></td><td><code>$2101-09-05T07:16:19.714+0200$</code></td></tr><tr><td><code>tuple[T1,…​,_Tn]</code></td><td><code>&lt;1,2&gt;</code>, <code>&lt;&quot;john&quot;, 43, true&gt;</code></td></tr><tr><td><code>list[T]</code></td><td><code>[]</code>, <code>[1]</code>, <code>[1,2,3]</code>, <code>[true, 2, &quot;abc&quot;]</code></td></tr><tr><td><code>set[T]</code></td><td><code>{}</code>, <code>{1,2,3,5,7}</code>, <code>{&quot;john&quot;, 4.0}</code></td></tr><tr><td><code>rel[T1,…​,_Tn]</code></td><td><code>{&lt;1,2&gt;,&lt;2,3&gt;,&lt;1,3&gt;}</code>, <code>{&lt;1,10,100&gt;, &lt;2,20,200&gt;}</code></td></tr><tr><td><code>map[T, U]</code></td><td><code>()</code>, <code>(1:true, 2:false)</code>, <code>(&quot;a&quot;:1, &quot;b&quot;:2)</code></td></tr><tr><td><code>node</code></td><td><code>f()</code>, <code>add(x,y)</code>, <code>g(&quot;abc&quot;, [2,3,4])</code></td></tr></tbody></table><p>A fragment of the datatype that defines the abstract syntax for statements (assignment, if, while) in a programming
language would look as follows:</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data STAT = asgStat(Id name, EXP exp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          | ifStat(EXP exp,list[STAT] thenpart,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           list[STAT] elsepart)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          | whileStat(EXP exp, list[STAT] body)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here are some examples how Rascal responds to values of the above built-in datatypes:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">101;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.14;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Rascal&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|file:///etc/passwd|;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$2101-09-05$;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[30, 20, 10];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;&quot;Rascal&quot;, 100000&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;apples&quot;, &quot;oranges&quot;, &quot;bananas&quot;};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&lt;&quot;apples&quot;, 10, 15&gt;, &lt;&quot;oranges&quot;, 5, 7&gt;, &lt;&quot;bananas&quot;, 9, 11&gt;};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(&quot;apples&quot; : 100, &quot;oranges&quot;: 150, &quot;bananas&quot;: 75);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;abc&quot;(1, 2, 3);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="immutable-values">Immutable Values<a class="hash-link" href="#immutable-values" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Immutable values.</p><p><strong>Description.</strong></p><p>Values are the basic building blocks of a language and the type of values determines how they may be used.</p><p>Rascal is a <em>value-oriented language</em>. This means that values are immutable and are always freshly constructed from
existing parts. For instance, replacing an element in a list does not modify the original list but produces a new list
that only differs from the original one in the modified position.</p><p>The language also provides variables. A value can be associated with a variable as the result of an explicit assignment
statement: during the lifetime of a variable different (immutable) values may be assignment to it. Other ways to
associate a value with a variable is by way of function calls (binding of formal parameters to actual values) and as the
result of a successful pattern match.</p><p>The approach that values are immutable and that variables can be associated with different immutable values during their
lifetime avoids sharing and aliasing problems that exist in many languages.</p><p><strong>Examples.</strong></p><p>First we, create a list value and assign it to two variables <code>L</code> and <code>M</code>.</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">L = [1, 2, 3];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">M = L;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next we assign a new value to the first element of the list. The effect is that a new list value <code>[10, 2, 3]</code> is
constructed.</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">L[0] = 10;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>L is now associated with this new value:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">L;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>But <code>M</code> is still associated with the original, unmodified, value.</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">M;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In pointer-based languages and in object-oriented languages the change to the original value of <code>L</code> would also be
visible via <code>M</code>.</p><p>String values are, like all other values, also immutable. Let’s experiment with the
<a href="/docs/Libraries#replaceall">replaceAll</a> function:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import String;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replaceAll(&quot;abracadabra&quot;, &quot;a&quot;, &quot;A&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now assign to variables <code>S</code> and <code>T</code> the string <code>&quot;abracadabra&quot;</code> and let’s see what happens:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">S = &quot;abracadabra&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">T = S;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S = replaceAll(&quot;abracadabra&quot;, &quot;a&quot;, &quot;A&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">T;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To summarize: all values are immutable and variables can during their lifetime be associated with different immutable
values.</p><ul><li>Immutable values contribute to referential transparence.</li></ul><ul><li>Immutable values maybe less efficient than mutable ones.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="comprehensions">Comprehensions<a class="hash-link" href="#comprehensions" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Comprehensions for generating values.</p><p><strong>Description.</strong></p><p>Comprehensions are a notation inspired by mathematical <a href="http://en.wikipedia.org/wiki/Set-builder_notation" target="_blank" rel="noopener noreferrer">set-builder
notation</a> and <a href="http://en.wikipedia.org/wiki/List_comprehension" target="_blank" rel="noopener noreferrer">list
comprehensions</a> that help to write succinct definitions of lists and
sets. They are also inspired by queries as found in a language like SQL.</p><p>Rascal generalizes comprehensions in various ways. Comprehensions exist for lists, sets and maps. A comprehension
consists of an expression that determines the successive elements to be included in the result and a list of enumerators
and tests (boolean expressions). The enumerators produce values and the tests filter them.</p><p>See <a href="/docs/Rascal#comprehensions">Comprehensions</a>, <a href="/docs/Rascal#comprehension">List Comprehension</a>, <a href="/docs/Rascal#comprehension">Set
Comprehension</a>, and <a href="/docs/Rascal#comprehension">Map Comprehension</a> for details.</p><p><strong>Examples.</strong></p><p>A standard example is</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{ x * x | int x &lt;- [1 .. 10], x % 3 == 0 }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>i.e., the squares of the integers in the range <code>[ 1 .. 10 ]</code> that are divisible by 3. A more intriguing example (that we
do not give in full detail) is</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{name | /asgStat(Id name, _) &lt;- P}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>which traverses program <code>P</code> (using the <em>descendant match</em> operator <code>/</code>, see <a href="/docs/Rascal#abstract">Patterns</a>) and
constructs a set of all identifiers that occur on the left hand side of assignment statements in <code>P</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-matching">Pattern Matching<a class="hash-link" href="#pattern-matching" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Pattern matching.</p><p><strong>Description.</strong></p><p>Pattern matching determines whether a given pattern matches a given value. The outcome can be <code>false</code> (no match) or
<code>true</code> (a match). A pattern match that succeeds may bind values to variables.</p><p>Pattern matching is <em>the</em> mechanism for case distinction (<a href="/docs/Rascal#switch">Switch</a> statement) and search
(<a href="/docs/Rascal#visit">Visit</a> statement) in Rascal. Patterns can also be used in an explicit match operator <code>:=</code>
and can then be part of larger boolean expressions. Since a pattern match may have more than one solution, local
backtracking over the alternatives of a match is provided. Patterns can also be used in
<a href="/docs/Rascal#enumerator">Enumerators</a>s and control structures like <a href="/docs/Rascal#for">For</a> and
<a href="/docs/Rascal#while">While</a> statement.</p><p>A very rich pattern language is provided that includes string matching based on regular expressions, matching of
abstract patterns, and matching of concrete syntax patterns. Some of the features that are provided are list
(associative) matching, set (associative, commutative, idempotent) matching, and deep matching of descendant patterns.
All these forms of matching can be used in a single pattern and can be nested. Patterns may contain variables that are
bound when the match is successful. Anonymous (don’t care) positions are indicated by the underscore (<code>_</code>). See
<a href="/docs/Rascal#patterns">Patterns</a> for more details.</p><p><strong>Examples.</strong></p><p>Here is a <em>regular expression</em> that matches a line of text, finds the first alphanumeric word in it, and extracts the
word itself as well as the before and after it (<code>\W</code> matches all non-word characters; <code>\w</code> matches all word characters):</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/^&lt;before:\W*&gt;&lt;word:\w+&gt;&lt;after:.*$&gt;/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Regular expressions follow the Java regular expression syntax with one exception: instead of using numbered groups to
refer to parts of the subject string that have been matched by a part of the regular expression we use the notation:</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Name&lt;/emphasis&gt;:_RegularExpression_&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If <code>RegularExpression</code> matches, the matched substring is assigned to string variable <code>Name</code>.</p><p>The following abstract pattern matches the abstract syntax of a while statement defined earlier:</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">whileStat(EXP Exp, list[STAT] Stats)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Variables in a pattern are either explicitly declared in the pattern itself---as done in the example---or they may be
declared in the context in which the pattern occurs. So-called multi-variables in list and set patterns are declared by
a <code>  </code> suffix: <code>X&lt;/emphasis&gt;</code> is thus an abbreviation for <code>list[…​] X</code> or <code>set[…​] X</code>, where the precise element type
depends on the context. The above pattern can then be written as</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">whileStat(EXP Exp, Stats*)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or, if you are not interested in the actual value of the statements as</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">whileStat(EXP Exp, _*)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When there is a grammar for this example language, we can also write concrete patterns as described in <a href="/docs/Rascal#concrete">Concrete
Patterns</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="control-structures">Control Structures<a class="hash-link" href="#control-structures" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Success-directed control structures.</p><p><strong>Description.</strong></p><p>The flow of Rascal program execution is completely explicit. Boolean expressions determine choices that drive the
control structures. Only local backtracking is provided in the context of boolean expressions and pattern matching.</p><p>Control structures like <a href="/docs/Rascal#if">If</a>, <a href="/docs/Rascal#while">While</a> and <a href="/docs/Rascal#for">For</a>
statement are driven by Boolean expressions. Actually, combinations of generators and Boolean expressions can be used to
drive the control structures. In the latter case, the Boolean expression is executed for each generated value.</p><p><strong>Examples.</strong></p><p>A classical if statement:</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if(N &lt;= 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     return 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     return N * fac(N - 1);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A combination of a generator and a test:</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">for(/docs/asgStat(Id name, _) &lt;- P, size(name) &gt; 10){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println(name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This statement prints all identifiers in assignment statements (<code>asgStat</code>) that consist of more than 10 characters.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="case-distinction">Case Distinction<a class="hash-link" href="#case-distinction" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Case distinction via pattern matching.</p><p><strong>Description.</strong></p><p>The switch statement as known from C and Java is generalized: the subject value to switch on may be an arbitrary value
and the cases are arbitrary patterns followed by a statement. Each case is comparable to a <em>transaction</em>: when the
pattern succeeds and the following statement is executed successfully, all changes to variables made by the statement
are committed and thus become permanent. The variables bound by the pattern are always local to the statement associated
with the case.</p><p>See <a href="/docs/Rascal#switch">Switch</a>,<a href="/docs/Rascal#visit">Visit</a> and <a href="/docs/Rascal#pattern-with-action">Pattern With
Action</a> for more details.</p><p><strong>Examples.</strong></p><p>We use the <a href="/docs/Recipes#colored-trees">ColoredTrees</a> datatype as example and use a switch to distinguish between red
and black nodes:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data ColoredTree =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      leaf(int N)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | red(ColoredTree left, ColoredTree right)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | black(ColoredTree left, ColoredTree right);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ColoredTree CT = red(black(leaf(1), red(leaf(2),leaf(3))), black(leaf(3), leaf(4)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import IO;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">switch (CT){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case red(_, _):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     println(&quot;A red root node&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case black(_, _):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     println(&quot;A black root node&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="visiting">Visiting<a class="hash-link" href="#visiting" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Visiting tree structures and arbitrary values.</p><p><strong>Description.</strong></p><p>Visiting the elements of a data structure is one of the most common operations in our domain and the visitor design
pattern is a solution known to every software engineer. Given a tree-like data structure we want to perform an operation
on some (or all) nodes of the tree. The purpose of the visitor design pattern is to decouple the logistics of visiting
each node from the actual operation on each node. In Rascal the logistics of visiting is completely automated.</p><p>Visiting is achieved by way of visit expressions that resemble the switch statement. A visit expression traverses an
arbitrarily complex subject value and applies a number of cases to all its subtrees. All the elements of the subject are
visited. When one of the cases matches the statements associated with that case are executed. These cases may:</p><ul><li><p>cause some side effect, i.e., assign a value to local or global variables;</p></li><li><p>execute an <a href="/docs/Rascal#insert">Insert</a> statement that replaces the current element;</p></li><li><p>execute a <a href="/docs/Rascal#fail">Fail</a> statement that causes the match for the current case to fail.</p></li></ul><p>The value of a visit expression is the original subject value with all replacements made as dictated by matching cases.
The traversal order in a visit expressions can be explicitly defined by the programmer.</p><p><strong>Examples.</strong></p><p>Examples of visiting are, for instance, given in the Recipes <a href="/docs/Recipes#colored-trees">ColoredTrees</a> and
<a href="/docs/Recipes#derivative">Derivative</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a class="hash-link" href="#functions" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Functions and pattern-directed invocation.</p><p><strong>Description.</strong></p><p>Functions allow the definition of frequently used operations. They have a name and formal parameters. They are
explicitly declared and are fully typed. Functions can also be used as values thus enabling higher-order functions.
Rascal is a higher-order language in which functions are first-class values.</p><p>See <a href="/docs/Rascal#function-declaration">Function Declaration</a> for details.</p><p><strong>Examples.</strong></p><p>Here is an example of a function that counts the number of assignment statements in a program:</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int countAssignments(PROGRAM P){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int n = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    visit (P){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case asgStat(_, _):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         n += 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return n;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Consider the following use of higher-order functions:</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int double(int x) { return 2 * x; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int triple(int x) { return 3 * x; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int f(int x, int (int) multi){ return multi(x); }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The functions <code>double</code> and <code>triple</code> simply multiply their argument with a constant. Function <code>f</code> is, however, more
interesting. It takes an integer <code>x</code> and a function <code>multi</code> (with integer argument and integer result) as argument and
applies multi to its own argument. <code>f(5, triple)</code> will hence return <code>15</code>. Function values can also be created
anonymously as illustrated by the following, alternative, manner of writing this same call to <code>f</code>:</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">f(5, int (int y){return 3 * y;});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here the second argument of <code>f</code> is an anonymous function.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-definition-and-parsing">Syntax Definition and Parsing<a class="hash-link" href="#syntax-definition-and-parsing" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Syntax definition and parser generation for new languages.</p><p><strong>Description.</strong></p><p>All source code analysis projects need to extract information directly from the source code. There are two main
approaches to this:</p><ul><li><p><em>Lexical information</em>: Use regular expressions to extract useful, but somewhat superficial, flat, information. This
can be achieved using regular expression patterns, see <a href="/docs/Rascal#regular">Regular Expression Pattern</a>s.</p></li><li><p><em>Structured information</em>: Use syntax analysis to extract the complete, nested, structure of the source code in the
form of a syntax tree. Rascal can directly manipulate the parse trees, but it also enables user-defined mappings
from parse tree to abstract syntax tree.</p></li></ul><p>Using <a href="/docs/Rascal#syntax-definition">Syntax Definitions</a> you can define the syntax of any (programming)
language. Then Rascal:</p><ul><li><p>will generate the parser, and</p></li><li><p>will provide pattern matching and pattern construction on parse trees and abstract syntax trees, see <a href="/docs/Rascal#abstract">Abstract
Patterns</a> and <a href="/docs/Rascal#concrete">Concrete Patterns</a>.</p></li></ul><p><strong>Examples.</strong></p><p>Let’s use the Exp language as example. It contains the following elements:</p><ul><li><p>Integer constants, e.g., <code>123</code>.</p></li><li><p>A multiplication operator, e.g., <code>3*4</code>.</p></li><li><p>An addition operator, e.g., <code>3+4</code>.</p></li><li><p>Multiplication is left-associative and has precedence over addition.</p></li><li><p>Addition is left-associative.</p></li><li><p>Parentheses can be used to override the precedence of the operators.</p></li></ul><p>Here are some examples:</p><ul><li><p><code>123</code></p></li><li><p><code>2+3+4</code></p></li><li><p><code>2+3*4</code></p></li><li><p><code>(2+3)*4</code></p></li></ul><p>The EXP language can be defined as follows:</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module demo::lang::Exp::Concrete::WithLayout::Syntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">layout Whitespace = [\t-\n\r\ ]*; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lexical IntegerLiteral = [0-9]+;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start syntax Exp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  = IntegerLiteral</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  | bracket &quot;(&quot; Exp &quot;)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; left Exp &quot;*&quot; Exp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; left Exp &quot;+&quot; Exp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now you may parse and manipulate programs in the EXP language. Let’s demonstrate parsing an expression:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import demo::lang::Exp::Concrete::WithLayout::Syntax;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import ParseTree;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">parse(#start[Exp], &quot;2+3*4&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>First we import the syntax definition and the <a href="/docs/Libraries#parsetree">ParseTree</a> module that provides the parsing
functionality. Finally, we parse <code>2+3*4</code> using the start symbol <code>Exp</code>.</p><p>Don’t be worried, we are just showing the resulting parse tree here. It intended for programs and not for humans. The
points we want to make are:</p><ul><li><p>Rascal grammars are relatively easy to read and write (unfortunately, writing grammars will never become simple).</p></li><li><p>Parser generation is completely implicit.</p></li><li><p>Given a syntax definition, it can be used immediately for parsing.</p></li></ul><p>See <a href="/docs/Recipes">Recipes</a> for a more extensive presentation of the <a href="/docs/Recipes#exp">EXP</a> language and
<a href="/docs/Recipes#languages">Languages</a> for other language examples.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ide-construction-outdated">IDE Construction (OUTDATED)<a class="hash-link" href="#ide-construction-outdated" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Extend an IDE with interactive, language-specific, features (Eclipse only).</p><p><strong>Description.</strong></p><p>Meta-programs become most useful, when they are integrated with an Interactive Development Environment (IDE).</p><p>A Rascal program running inside Eclipse can get access to many of the services provided by Eclipse such as syntax
highlighting, outlining, documentation hovering and much more.</p><p>Rascal uses the services of the IDE Meta-tooling Platform, or <a href="http://www.eclipse.org/imp/" target="_blank" rel="noopener noreferrer">IMP</a> for short, a collection
of API and tools to support constructing IDEs for programming languages and domain specific languages. Rascal is also
part of the collection of IMP tools and (will be) hosted shortly on eclipse.org.</p><p>Using the <a href="/docs/Libraries#ide">IDE library</a>, you can instantiate the services that IMP provides for any language
implemented in Rascal.</p><p>To instantiate an IDE for a language implemented using Rascal, use the following steps:</p><ul><li><p>Define the grammar for the language.</p></li><li><p>Define a parse function for the language.</p></li><li><p>Register the language.</p></li></ul><p>The following IDE features are available</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="code-models">Code Models<a class="hash-link" href="#code-models" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Code models are abstract representations of source code</p><p><strong>Description.</strong></p><p>You can use any of Rascal’s <a href="/docs/Rascal#values">Values</a> to represent facts about source code. For example,
<a href="/docs/Rascal#ADT">Algebraic Data Types</a> can be used to define abstract syntax trees and
<a href="#values-Relation">???</a> are used to represent call graphs. We consistently use <a href="/docs/Rascal#location">Locations</a> to
refer to source code artifacts, either physically (<code>|file:///tmp/HelloWorld.java|</code>) or logically
(<code>|java+class://java/lang/Object|</code>).</p><p>Specifically we have standardized a set of models to represent source code which are ready for computing metrics:
<!-- -->#<!-- -->/Libraries<!-- -->#<!-- -->analysis-m3<!-- -->[<!-- -->M3<!-- -->]<!-- -->. This M3 model consists of:</p><ul><li><p>an open (extensible) set of <a href="/docs/Rascal#relation">Relations</a> between source code artifacts.</p></li><li><p>a number of extensible <a href="/docs/Rascal#ADT">Algebraic Data Types</a> for representing abstract
syntax trees.</p></li></ul><p>The core language independent model can be found here: <a href="/docs/Libraries#m3">analysis::m3</a>.</p><p>Extensions for representing facts about specific languages:</p><ul><li><a href="/docs/Libraries#m3">lang::java::m3</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="enumerating">Enumerating<a class="hash-link" href="#enumerating" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Enumerating values.</p><p><strong>Description.</strong></p><p>Enumerating regards the enumeration of the values in a given (finite) domain, be it the elements in a list, the
substrings of a string, or all the nodes in a tree. Each value that is enumerated is first matched against a pattern
before it can possibly contribute to the result of the enumerator. An enumerator yields <code>true</code> as long as it has
generated a new value, and <code>false</code> otherwise.</p><p>See <a href="/docs/Rascal#enumerator">Enumerator</a> for details.</p><p><strong>Examples.</strong></p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int x &lt;- { 1, 3, 5, 7, 11 }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int x &lt;- [ 1 .. 10 ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/asgStat(Id name, _) &lt;- P</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The first two produce the integer elements of a set of integers, respectively, a range of integers. Observe that the
left-hand side of an enumerator is a pattern, of which <code>int x</code> is a specific instance. The use of more general patterns
is illustrated by the third enumerator that does a deep traversal (as denoted by the descendant operator <code>/</code>) of the
complete program <code>P</code> (that is assumed to have a <code>PROGRAM</code> as value) and only yields statements that match the assignment
pattern (<code>asgStat</code>). Note the use of an anonymous variable at the <code>EXP</code> position in the pattern.</p><p>Let’s practice some of these examples.</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int x &lt;- {};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The enumerator does not produce any value and returns <code>false</code>.</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int x &lt;- {1, 3, 5, 7, 11 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Well, this is a disappointing experience. The generator returned <code>true</code> since it did produce a value. Apparently, we
cannot inspect the value of the variable <code>x</code> that was bound.</p><p>Another example that results in an error:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">str x &lt;- {1, 3, 5, 7, 11 };</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here, the enumerator produces its first integer value, an attempt is made to assign this to variable <code>x</code> that is
declared as string, and an error results.</p><p>A more satisfying use is as follows:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{ x * x | int x &lt;- {1, 3, 5, 7, 11 }};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When used inside <a href="/docs/Rascal#comprehensions">Comprehensions</a>, or <a href="/docs/Rascal#for">For</a>,
<a href="/docs/Rascal#do">Do</a>, or <a href="/docs/Rascal#while">While</a> statement, all values of the generator will be
produced and used. The variables that are introduced by a enumerator are local to the construct in which the enumerator
is used. Here is a similar example:</p><div class="language-rascal-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import IO;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for(int x &lt;- {1, 3, 5, 7, 11 })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println(&quot;x = &lt;x&gt;&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Pitfalls.</strong></p><p>The variables that are bound by an enumerator are local to the statement in which the enumerator is used.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="equation-solving">Equation Solving<a class="hash-link" href="#equation-solving" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Solving equations by fixed-point iteration.</p><p><strong>Description.</strong></p><p>Many problems can be solved by forms of <em>constraint solving</em>. This is a declarative way of programming: specify the
constraints that a problem solution should satisfy and how potential solutions can be generated. The actual solution (if
any) is found by enumerating solutions and testing their compliance with the constraints.</p><p>Rascal provides a <a href="/docs/Rascal#solve">Solve</a> statement that helps writing constraint solvers.</p><p><strong>Examples.</strong></p><p>A typical example is data flow analysis where the propagation of values through a program can be described by a set of
equations. Their solution can be found with the solve statement.</p><blockquote><p><strong>Warning</strong></p><p>add links</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rewriting">Rewriting<a class="hash-link" href="#rewriting" title="Direct link to heading">​</a></h2><p><strong>Synopsis.</strong></p><p>Rewriting using pattern-directed invocation</p><p><strong>Description.</strong></p><p>A rewrite rule is a recipe on how to simplify values. Remember: (<em>a</em> + <em>b</em>)<sup>2</sup> = <em>a</em><sup>2</sup> + 2 <em>ab</em> +
<em>b</em><sup>2</sup>? A rewrite rule has a pattern as left-hand side — here: (<em>a</em> + <em>b</em>)<sup>2</sup> — and a replacement as
right-hand side — here: <em>a</em><sup>2</sup> + 2 <em>ab</em> + <em>b</em><sup>2</sup>. Given a value and a set of rewrite rules the
patterns are tried on every subpart of the value and replacements are made if a match is successful. This is repeated as
long as some pattern matches.</p><p>Rascal has ancestors, notably <a href="http://www.meta-environment.org/" target="_blank" rel="noopener noreferrer">ASF+SDF</a>, where rewriting was the most important
computation mechanism. In Rascal, rewriting can be achieved using pattern-directed invocation, see <a href="/docs/Rascal#function">Function
Declaration</a>, possibly combined with a <a href="/docs/Rascal#visit">Visit</a> statement.</p><p><strong>Examples.</strong></p><p>In a package for symbolic differentiation it is desirable to keep expressions in simplified form in order to avoid
intermediate results like <code>add(product(con(1), x), mul(con(0), y))</code> that can be simplified to <code>x</code>. The following
definitions achieve this:</p><div class="language-rascal codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rascal codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Exp simp(add(con(n), con(m))) = con(n + m);   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exp simp(mul(con(n), con(m))) = con(n * m);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exp simp(mul(con(1), Exp e))  = e;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exp simp(mul(Exp e, con(1)))  = e;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exp simp(mul(con(0), Exp e))  = con(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exp simp(mul(Exp e, con(0)))  = con(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exp simp(add(con(0), Exp e))  = e;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exp simp(add(Exp e, con(0)))  = e;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default Exp simp(Exp e)       = e;            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exp simplify(Exp e){                          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return bottom-up visit(e){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           case Exp e1 =&gt; simp(e1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>Definitions of the function <code>simp</code> are given with different patterns as formal argument. Each definition is
responsible for one particular simplification (here is where the similarity with rewrite rules surfaces).</p></li><li><p>A default for <code>simp</code> is given: if no other definition applies, the default one is used.</p></li><li><p>The actual <code>simplify</code> function: it performs a bottom up visit of the expression, replacing each subexpression by a
simplified version.</p></li></ul><p>See <a href="/docs/Recipes#derivative">Derivative</a> for a full explanation of this example.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/usethesource/rascal-website/tree/website-v2/docs/docs/RascalConcepts.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/GettingHelp"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Getting Help</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Rascal"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Language Reference</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#static-typing" class="table-of-contents__link toc-highlight">Static Typing</a></li><li><a href="#datatypes" class="table-of-contents__link toc-highlight">Datatypes</a></li><li><a href="#immutable-values" class="table-of-contents__link toc-highlight">Immutable Values</a></li><li><a href="#comprehensions" class="table-of-contents__link toc-highlight">Comprehensions</a></li><li><a href="#pattern-matching" class="table-of-contents__link toc-highlight">Pattern Matching</a></li><li><a href="#control-structures" class="table-of-contents__link toc-highlight">Control Structures</a></li><li><a href="#case-distinction" class="table-of-contents__link toc-highlight">Case Distinction</a></li><li><a href="#visiting" class="table-of-contents__link toc-highlight">Visiting</a></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a></li><li><a href="#syntax-definition-and-parsing" class="table-of-contents__link toc-highlight">Syntax Definition and Parsing</a></li><li><a href="#ide-construction-outdated" class="table-of-contents__link toc-highlight">IDE Construction (OUTDATED)</a></li><li><a href="#code-models" class="table-of-contents__link toc-highlight">Code Models</a></li><li><a href="#enumerating" class="table-of-contents__link toc-highlight">Enumerating</a></li><li><a href="#equation-solving" class="table-of-contents__link toc-highlight">Equation Solving</a></li><li><a href="#rewriting" class="table-of-contents__link toc-highlight">Rewriting</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/GettingStarted">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/rascal" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/usethesource" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 UseTheSource. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3f32e7f3.js"></script>
<script src="/assets/js/main.ea59d2f2.js"></script>
</body>
</html>