"use strict";(self.webpackChunkrascal_website=self.webpackChunkrascal_website||[]).push([[47887],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>y});var a=t(67294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var o=a.createContext({}),c=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=c(e.components);return a.createElement(o.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(t),y=l,m=p["".concat(o,".").concat(y)]||p[y]||d[y]||r;return t?a.createElement(m,i(i({ref:n},u),{},{components:t})):a.createElement(m,i({ref:n},u))}));function y(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=p;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s.mdxType="string"==typeof e?e:l,i[1]=s;for(var c=2;c<r;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},43330:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=t(83117),l=(t(67294),t(3905));const r={title:"analysis::text::search::Lucene"},i=void 0,s={unversionedId:"Library/analysis/text/search/Lucene",id:"Library/analysis/text/search/Lucene",title:"analysis::text::search::Lucene",description:"Usage",source:"@site/docs/Library/analysis/text/search/Lucene.md",sourceDirName:"Library/analysis/text/search",slug:"/Library/analysis/text/search/Lucene",permalink:"/docs/Library/analysis/text/search/Lucene",draft:!1,editUrl:"https://github.com/usethesource/rascal-website/tree/website-v2/docs/docs/Library/analysis/text/search/Lucene.md",tags:[],version:"current",frontMatter:{title:"analysis::text::search::Lucene"},sidebar:"tutorialSidebar",previous:{title:"analysis::text::search::Grammars",permalink:"/docs/Library/analysis/text/search/Grammars"},next:{title:"analysis::text::search::LuceneTest",permalink:"/docs/Library/analysis/text/search/LuceneTest"}},o={},c=[{value:"Usage",id:"usage",level:4},{value:"Synopsis",id:"synopsis",level:4},{value:"Description",id:"description",level:4},{value:"data Document",id:"analysis-text-search-Lucene-Document",level:2},{value:"Synopsis",id:"synopsis-1",level:4},{value:"Description",id:"description-1",level:4},{value:"data Analyzer",id:"analysis-text-search-Lucene-Analyzer",level:2},{value:"data Analyzer",id:"analysis-text-search-Lucene-Analyzer",level:2},{value:"Synopsis",id:"synopsis-2",level:4},{value:"Description",id:"description-2",level:4},{value:"data Term",id:"analysis-text-search-Lucene-Term",level:2},{value:"data Tokenizer",id:"analysis-text-search-Lucene-Tokenizer",level:2},{value:"data Filter",id:"analysis-text-search-Lucene-Filter",level:2},{value:"function createIndex",id:"analysis-text-search-Lucene-createIndex",level:2},{value:"Synopsis",id:"synopsis-3",level:4},{value:"function searchIndex",id:"analysis-text-search-Lucene-searchIndex",level:2},{value:"Synopsis",id:"synopsis-4",level:4},{value:"function searchDocument",id:"analysis-text-search-Lucene-searchDocument",level:2},{value:"Synopsis",id:"synopsis-5",level:4},{value:"function analyzeDocument",id:"analysis-text-search-Lucene-analyzeDocument",level:2},{value:"Synopsis",id:"synopsis-6",level:4},{value:"function listTerms",id:"analysis-text-search-Lucene-listTerms",level:2},{value:"Synopsis",id:"synopsis-7",level:4},{value:"function listFields",id:"analysis-text-search-Lucene-listFields",level:2},{value:"Synopsis",id:"synopsis-8",level:4},{value:"function classicAnalyzer",id:"analysis-text-search-Lucene-classicAnalyzer",level:2},{value:"function simpleAnalyzer",id:"analysis-text-search-Lucene-simpleAnalyzer",level:2},{value:"function standardAnalyzer",id:"analysis-text-search-Lucene-standardAnalyzer",level:2},{value:"function whitespaceAnalyzer",id:"analysis-text-search-Lucene-whitespaceAnalyzer",level:2},{value:"function classicTokenizer",id:"analysis-text-search-Lucene-classicTokenizer",level:2},{value:"function lowerCaseTokenizer",id:"analysis-text-search-Lucene-lowerCaseTokenizer",level:2},{value:"function lowerCaseFilter",id:"analysis-text-search-Lucene-lowerCaseFilter",level:2}],u={toc:c};function d(e){let{components:n,...t}=e;return(0,l.kt)("wrapper",(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h4",{id:"usage"},"Usage"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"import analysis::text::search::Lucene;")),(0,l.kt)("h4",{id:"synopsis"},"Synopsis"),(0,l.kt)("p",null,"Simple interface to the Lucene text analysis library"),(0,l.kt)("h4",{id:"description"},"Description"),(0,l.kt)("p",null,"This module wraps the Apache Lucene framework for text analysis. "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"It integrates deeply by\nproviding the interfaces for the analysis extension points of Lucene via Rascal callback functions: Analyzers, Tokenizers, Filters."),(0,l.kt)("li",{parentName:"ul"},"It provides access to the full library of Lucene's text analyzers via their class names."),(0,l.kt)("li",{parentName:"ul"},"It is a work in progress. Some configurability of Lucene is not yet exposed, for example\nprogrammable weights for fields and the definition of similarity functions per document field. Also Query expressions are not yet exposed."),(0,l.kt)("li",{parentName:"ul"},"This wrapper provides full abstraction over source locations. Both the directory of the index\nas well as the locations of input documents are expressed using any existing rascal ",(0,l.kt)("inlineCode",{parentName:"li"},"loc"),". ")),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-Document"},"data Document"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rascal"},"data Document  \n     = document(loc src, real score=.0)\n     ;\n")),(0,l.kt)("h4",{id:"synopsis-1"},"Synopsis"),(0,l.kt)("p",null,"A Lucene document has a src and an open set of keyword fields which are also indexed"),(0,l.kt)("h4",{id:"description-1"},"Description"),(0,l.kt)("p",null,"A lucene document has a ",(0,l.kt)("inlineCode",{parentName:"p"},"src"),' origin and an open set of keyword fields.\nAdd as many keyword fields to a document as you want. They will be added to the Lucene document as "Fields".'),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"fields of type ",(0,l.kt)("inlineCode",{parentName:"li"},"str")," will be stored and indexed as-is"),(0,l.kt)("li",{parentName:"ul"},"fields of type ",(0,l.kt)("inlineCode",{parentName:"li"},"loc")," will be indexed but not stored")),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-Analyzer"},"data Analyzer"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rascal"},"data Analyzer  \n     = analyzerClass(str analyzerClassName)\n     | analyzer(Tokenizer tokenizer, list[Filter] pipe)\n     ;\n")),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-Analyzer"},"data Analyzer"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rascal"},"data Analyzer  \n     = fieldsAnalyzer(Analyzer src)\n     ;\n")),(0,l.kt)("h4",{id:"synopsis-2"},"Synopsis"),(0,l.kt)("p",null,"A fieldsAnalyzer declares using keyword fields which Analyzers to use for which Document field."),(0,l.kt)("h4",{id:"description-2"},"Description"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"src")," parameter of ",(0,l.kt)("inlineCode",{parentName:"p"},"fieldsAnalyzer")," aligns with the ",(0,l.kt)("inlineCode",{parentName:"p"},"src")," parameter of a Document: this analyzer is used\nto analyze the ",(0,l.kt)("inlineCode",{parentName:"p"},"src")," field. Any other keyword fields, of type ",(0,l.kt)("inlineCode",{parentName:"p"},"Analyzer")," are applied to the contents of a\n",(0,l.kt)("inlineCode",{parentName:"p"},"Document")," keyword field of type ",(0,l.kt)("inlineCode",{parentName:"p"},"loc")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"str")," with the same name. "),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-Term"},"data Term"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rascal"},"data Term  \n     = term(str chars, loc src, str kind)\n     ;\n")),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-Tokenizer"},"data Tokenizer"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rascal"},"data Tokenizer  \n     = tokenizer(list[Term] (str input) tokenizerFunction)\n     | tokenizerClass(str tokenizerClassName)\n     ;\n")),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-Filter"},"data Filter"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-rascal"},"data Filter  \n     = \\editFilter(str (str term) editor)\n     | \\removeFilter(bool (str term) accept)\n     | \\splitFilter(list[str] (str term) splitter)\n     | \\synonymFilter(list[str] (str term) generator)\n     | \\tagFilter(str (str term, str current) tagger)\n     | \\filterClass(str filterClassName)\n     ;\n")),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-createIndex"},"function createIndex"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"void createIndex(loc index, set[Document] documents, Analyzer analyzer = standardAnalyzer())"))),(0,l.kt)("h4",{id:"synopsis-3"},"Synopsis"),(0,l.kt)("p",null,"Creates a Lucene index at a given folder location from the given set of Documents, using a given set of text analyzers"),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-searchIndex"},"function searchIndex"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"set[Document] searchIndex(loc index, str query, Analyzer analyzer = standardAnalyzer(), int max = 10)"))),(0,l.kt)("h4",{id:"synopsis-4"},"Synopsis"),(0,l.kt)("p",null,"Searches a Lucene index indicated by the indexFolder by analyzing a query with a given set of text analyzers and then matching the query to the index."),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-searchDocument"},"function searchDocument"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"list[loc] searchDocument(loc doc, str query, Analyzer analyzer = standardAnalyzer(), int max = 10)"))),(0,l.kt)("h4",{id:"synopsis-5"},"Synopsis"),(0,l.kt)("p",null,"Searches a document for a query by analyzing it with a given analyzer and listing the hits inside the document, for debugging and reporting purposes."),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-analyzeDocument"},"function analyzeDocument"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"list[Term] analyzeDocument(loc doc, Analyzer analyzer = standardAnalyzer())")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"list[Term] analyzeDocument(str doc, Analyzer analyzer = standardAnalyzer())"))),(0,l.kt)("h4",{id:"synopsis-6"},"Synopsis"),(0,l.kt)("p",null,"Simulate analyzing a document source location like ",(0,l.kt)("inlineCode",{parentName:"p"},"createIndex")," would do, for debugging purposes"),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-listTerms"},"function listTerms"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"rel[str chars, int frequency] listTerms(loc index, str field, int max = 10)"))),(0,l.kt)("h4",{id:"synopsis-7"},"Synopsis"),(0,l.kt)("p",null,"Inspect the terms stored in an index for debugging purposes (what did the analyzers do to the content of the documents?)"),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-listFields"},"function listFields"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"rel[str field, int docCount, int sumTotalTermFreq] listFields(loc index)"))),(0,l.kt)("h4",{id:"synopsis-8"},"Synopsis"),(0,l.kt)("p",null,"Inspect the fields stored in an index for debugging purposes (which fields have been indexed, for how many documents, and how many terms?)"),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-classicAnalyzer"},"function classicAnalyzer"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Analyzer classicAnalyzer()"))),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-simpleAnalyzer"},"function simpleAnalyzer"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Analyzer simpleAnalyzer()"))),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-standardAnalyzer"},"function standardAnalyzer"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Analyzer standardAnalyzer()"))),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-whitespaceAnalyzer"},"function whitespaceAnalyzer"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Analyzer whitespaceAnalyzer()"))),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-classicTokenizer"},"function classicTokenizer"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Tokenizer classicTokenizer()"))),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-lowerCaseTokenizer"},"function lowerCaseTokenizer"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Tokenizer lowerCaseTokenizer()"))),(0,l.kt)("h2",{id:"analysis-text-search-Lucene-lowerCaseFilter"},"function lowerCaseFilter"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Filter lowerCaseFilter()"))))}d.isMDXComponent=!0}}]);